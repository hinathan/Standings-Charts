<!doctype html>
<html class="no-js">
<head>
<meta name="viewport" content="width=device-width; initial-scale=1.0">
<title>Standings-Charts</title>
<meta name="description" content="Simple, first-pass tool for plotting ranked entities in time series">
<meta name="keywords" content="canvas, chart, javascript">
<meta name="author" content="hinathan">
<script src="ext/headjs/dist/head.min.js"></script>
</head>

<h3>About</h3>Simple, first-pass tool for plotting ranked entities in time series. This is a variant of what appears to be called a 'bump chart'
<h3>Author</h3>Nathan Schmidt (n@hinathan.com)
<h3>License</h3>MIT
<h3>References</h3>
	<ul>
		<li>Originally saw a chart in Tufte's books and elsewhere related to rowing, have been meaning to do something like that for a while
			<ul>
			<li><a href="http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001lh">http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001lh</a></li>
			</ul>
		</li>
		<li>Proximate inspiration is a graphic (with new-to-me magnitudes mixed with the ranking) by Pat Minczeski / Wall Street Journal
			<ul>
			<li><a href="http://online.wsj.com/media/Trade_partners.gif">http://online.wsj.com/media/Trade_partners.gif</a> (ret 2011-02-25)</li>
			</ul>
		</li>
		<li><a href="http://processtrends.com/toc_bumps_charts.htm">http://processtrends.com/toc_bumps_charts.htm</a></li>
		<li><a href="http://junkcharts.typepad.com/junk_charts/bumps_chart/">http://junkcharts.typepad.com/junk_charts/bumps_chart/</a></li>
		<li><a href="http://www.mcshane.org/bumps/">http://www.mcshane.org/bumps/</a></li>
  </ul>
<style>
h3 { margin:0; }
</style>

<h3>Like the WSJ infographic</h3>
<canvas id="infographicexports" height="450" width="400" ></canvas>
<canvas id="infographicimports" height="550" width="400" ></canvas>


<h3>Magnituded ranks</h3>
<canvas id="netgraph" height="400" width="900" ></canvas>
<h3>Ranked items</h3>
<canvas id="netgraphrank" height="100" width="900" ></canvas>

<h3>Ranked items</h3>
<canvas id="graphbezier" height="100" width="900" ></canvas>

<h3>Ranked items (no bezier)</h3>
<canvas id="graph" height="100" width="900" ></canvas>

<h3>Magnituded ranks</h3>
<canvas id="graph2" height="360" width="900" ></canvas>

<script type="text/javascript">


var itemsFromInfographicExports = [
{name:"Canada",points:[31,65,91]},
{name:"Mexico",points:[11,41,59.5]},
{name:"Japan",points:[18,24,22]},
{name:"UK",points:[9,15,18]},
{name:"Germany",points:[7,11,18]},
{name:"South Korea",points:[5,10.5,14]},
{name:"Brazil",points:[2.5,6,13.5]},
{name:"Netherlands",points:[5.25,8.25,13.25]},
{name:"Singapore",points:[3.25,7.5,11]},
{name:"France",points:[5.25,7.5,10]},
{name:"Hong Kong",points:[2.25,5.5,10]},
{name:"Taiwan",points:[4.25,9.25,9.25]},
{name:"China",points:[2.25,6.25,33.75]},
];

var itemsFromInfographicImports = [
{name:"Canada",points:[32.5,84,101]},
{name:"Mexico",points:[11,48.25,83.5]},
{name:"Japan",points:[33,53.5,43]},
{name:"UK",points:[7,15.5,18.5]},
{name:"Germany",points:[10.5,22,30.5]},
{name:"South Korea",points:[7,14.5,18]},
{name:"Brazil",points:[3.5,0.25,0.25]},
{name:"France",points:[5,11,14]},
{name:"Hong Kong",points:[3.25,0.25,0.25]},
{name:"Taiwan",points:[8.25,14.5,13.25]},
{name:"Venezuela",points:[3.75,6.25,12.5]},
{name:"Nigeria",points:[2.25,3.5,11.5]},
{name:"China",points:[6.25,37,133.5]},
];

var cmap = {
	"Canada":"#6A89BB",
	"Japan":"#443B33",
	"Mexico":"#004A94",
	"UK":"#F0D252",
	"Germany":"#98A9CA",
	"South Korea":"#119D3F",
	"France":"#004A94",
	"Netherlands":"#2C67A7",
	"Taiwan":"#7DB877",
	"Brazil":"#7DB877",
	"China":"#D4022F",
	"Venezuela":"#DD7A76",
	"Nigeria":"#5D257C",
};

for(i=0;i<itemsFromInfographicExports.length;i++) {
	itemsFromInfographicExports[i].fillStyle=cmap[itemsFromInfographicExports[i].name];
}
for(i=0;i<itemsFromInfographicImports.length;i++) {
	itemsFromInfographicImports[i].fillStyle=cmap[itemsFromInfographicImports[i].name];
}
var optsinfographic = {minPitch:10,xgutter:'30%',ypadding:'3',target:"infographicexports",maxPoints:20,rankOnly:false,useBezier:false};


var opts = {xgutter:'25%',ypadding:'0%',target:"graphbezier",maxPoints:20,rankOnly:true};
var optsnobez = {xgutter:'25%',ypadding:'0%',target:"graph",maxPoints:20,rankOnly:true,useBezier:false};

function buildCharts() {

	var colors = paletteWithEntries(4).RdBu.slice(0);

	var items = [
	{name:"Canada",points:[100000,20000,10000,20000],fillStyle:colors.pop()},
	{name:"Mexico",points:[20000,30000,40000,10000],fillStyle:colors.pop()},
	{name:"Japan",points:[30000,10000,40000,30000],fillStyle:colors.pop()},
	{name:"China",points:[40000,40000,30000,20000],fillStyle:colors.pop()},
	];

	var colors = paletteWithEntries(4).BrBG.slice(0);

	var items2 = [
	{name:"Canada",points:[4,15,25,15,21],fillStyle:colors.pop()},
	{name:"Mexico",points:[4,51,24,25,32],fillStyle:colors.pop()},
	{name:"Japan",points:[10,25,40,33,43],fillStyle:colors.pop()},
	{name:"China",points:[3,6,12,24,48],fillStyle:colors.pop()},
	//{name:"bogo",points:[5,5,50,20],fillStyle:"rgba(100,100,100,.5)"},
	];
	var opts2 = {xgutter:'33%',ypadding:10,target:"graph2",stackedArea:false,useBezier:true,debugPoints:false};

	var items3 = [{"name":"Abstract","points":[534,172,1,439,222],"fillStyle":"#66c2a5"},{"name":"Burnished","points":[17481,20574,21835,18992,12981],"fillStyle":"#fc8d62"},{"name":"Chortle","points":[58118,47260,57831,66583,51079],"fillStyle":"#8da0cb"},{"name":"Dissonant","points":[13002,16289,7747,7039,3252],"fillStyle":"#e78ac3"},{"name":"Elephant","points":[1056,3225,3665,2590,1373],"fillStyle":"#a6d854"},{"name":"Fortunate","points":[1,1,1,1,2],"fillStyle":"#ffd92f"},{"name":"Goodyear","points":[12494,4594,28446,12597,41153],"fillStyle":"#e5c494"},{"name":"Hesitant","points":[19710,32399,29923,21746,18192],"fillStyle":"#b3b3b3"}];

	var opts3 = {xgutter:'25%',ypadding:'5%',target:"netgraph",stackedArea:false,useBezier:false,debugPoints:false};
	var opts4 = {xgutter:'25%',ypadding:'5%',target:"netgraphrank",stackedArea:false,useBezier:false,rankOnly:true};

	StandingsChart.init(items,opts);
	StandingsChart.init(items,optsnobez);
	StandingsChart.init(items2,opts2);
	StandingsChart.init(items3,opts3);
	StandingsChart.init(items3,opts4);
	StandingsChart.init(itemsFromInfographicExports,optsinfographic);
	optsinfographic.target = "infographicimports";
	StandingsChart.init(itemsFromInfographicImports,optsinfographic);

	var c1 = 5;
	var delay = 1000;
	if(0) {
		setTimeout
		(function() {
			if(c1--) {
				setTimeout(arguments.callee,delay);
			}
			addrand1();
			StandingsChart.init(items,opts);
			},
			delay);

		}
};

function addrand1() {
	for(i in items) {
		items[i].points.push(1000+(Math.random() * 5));
	}
}



 head.js("lib/standings-chart.js","lib/brewer-palettes.js", function() {
	buildCharts();
	} );
</script>

